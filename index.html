<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Visualizing Transformations</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="description" content="Interactive 3D vector and matrix visualization.">
  <meta name="theme-color" content="#ffffff">
  <meta name="author" content="Jaydesonia">
  <meta name="robots" content="index, follow">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%23fff' stroke='%23bbb' stroke-width='4'/%3E%3Cline x1='32' y1='32' x2='54' y2='32' stroke='%23e67e22' stroke-width='4'/%3E%3Cline x1='32' y1='32' x2='32' y2='10' stroke='%232ecc40' stroke-width='4'/%3E%3Cline x1='32' y1='32' x2='14' y2='54' stroke='%23398eea' stroke-width='4'/%3E%3Ccircle cx='32' cy='32' r='7' fill='%23e67e22' fill-opacity='0.7'/%3E%3Ccircle cx='54' cy='32' r='3' fill='%23e67e22'/%3E%3Ccircle cx='32' cy='10' r='3' fill='%232ecc40'/%3E%3Ccircle cx='14' cy='54' r='3' fill='%23398eea'/%3E%3C/svg%3E">
  <link rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAADLabXuAAA..."> <!-- (optional, can use a real PNG if desired) -->
  <link rel="stylesheet" href="style.css">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<body>
  <!-- Sidebar for vectors -->
  <div id="vectorSidebar">
    <div style="display:flex;align-items:center;justify-content:space-between;padding:8px 12px 4px 12px;position:relative;">
      <span style="font-size:1.1em;font-weight:600;letter-spacing:0.5px;">Vectors</span>
      <button class="mobile-close-btn" aria-label="Close vector panel" title="Close" style="display:none;">&#10006;</button>
    </div>
    <div id="vectorsBoxSidebar" style="flex:1 1 auto;overflow-y:auto;padding:0 12px 12px 12px;">
      <table id="vectorsTable" style="border-collapse:collapse;width:100%;">
        <tbody>
          <!-- Rows will be generated by JS -->
        </tbody>
      </table>
      <button id="addVectorRow" type="button" style="margin-top:8px;width:2em;height:2em;border-radius:50%;background:#fff;border:1px solid #bbb;box-shadow:0 1px 3px 0 rgba(0,0,0,0.07);font-size:1.2em;cursor:pointer;">+</button>
    </div>
  </div>
  <!-- Sidebar close button (half circle, always same shape, animates position) -->
  <button id="closeSidebarBtn" aria-label="Hide vector list">
    <span class="sidebar-icon">&#10094;</span>
  </button>
  <!-- Sidebar open button (half circle, always same shape, animates position) -->
  <button id="openSidebarBtn" aria-label="Show vector list">
    <span class="sidebar-icon">&#9776;</span>
  </button>
  <div id="sidebarOverlay"></div>
  <!-- Collapsible control panel -->
  <div id="controlsPanel" style="position:absolute;top:10px;left:10px;z-index:10;background:#fff8;padding:8px;border-radius:6px;transition:max-height 0.3s cubic-bezier(.4,0,.2,1);overflow:hidden;">
    <button id="toggleControlsBtn" aria-label="Toggle controls" style="margin-bottom:8px;display:block;">
      <span id="toggleControlsIcon" style="font-size:1.2em;">&#9650;</span>
      <span style="font-size:0.95em;">Controls</span>
    </button>
    <div id="controlsContent">
      <div style="display:flex;flex-wrap:wrap;gap:8px;">
        <div class="main_controls">
          <label style="margin:0 auto;">
            <input id="debugCheckbox" type="checkbox" checked>
            Debug mode
          </label>
          <span id="debugInfo" style="margin-left:10px;color:#333;font-family:monospace;"></span>
        </div>
        <div class="main_controls">
          <label style="margin:0 auto;">
            Grid extent:
            <input id="gridExtentSlider" type="range" min="0" max="1000" value="1000" step="10" style="width:120px;">
            <span id="gridExtentValue">10</span>
          </label>
        </div>
        <div class="main_controls">
          <label style="margin:0 auto;">
            <input id="axisCheckbox" type="checkbox" checked>
            Show axes
          </label>
        </div>
        <div class="main_controls" style="align-items:center;">
          <label style="margin:0 auto;">
            <input id="invertHorizontal" type="checkbox">
            Invert horizontal
          </label>
          <label style="margin: 0 auto;">
            <input id="invertVertical" type="checkbox">
            Invert vertical
          </label>
        </div>
        <div class="main_controls">
          <button id="componentButton" style="margin:0 auto;">Hide components</button>
        </div>
        <div class="main_controls">
          <label style="margin:0 auto;">
            <input id="arrow3dCheckbox" type="checkbox" checked>
            3D arrow
          </label>
        </div>
        <div class="main_controls">
          <label style="margin-left:12px;">
            <input type="checkbox" id="draggableTipCheckbox" checked>
            Draggable vector tips
          </label>
        </div>
        <div class="main_controls">
          <label style="margin-left:12px;">
            <input type="checkbox" id="showMatrixVectorsCheckbox" checked>
            Show matrix vectors
          </label>
        </div>
        <div class="main_controls">
          <label style="margin-left:12px;">
            <input type="checkbox" id="invertZoomCheckbox">
            Invert zoom
          </label>
        </div>
        <div class="main_controls">
          <label for="themeSelect" style="margin:0 auto;">
            Theme:
            <select id="themeSelect" style="margin-left:6px;">
              <option value="auto">Auto</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </label>
        </div>
      </div>
    </div>
  </div>
  <canvas id="myCanvas"></canvas>
  <!-- Add matrix input to bottom right -->
  <div id="matrixInputPanel" style="position:fixed;right:18px;bottom:18px;z-index:1200;">
    <span style="font-size:1em;font-weight:500;margin-bottom:4px;">Matrix (n x 3):</span>
    <table id="matrixTable" style="display:inline-block;vertical-align:middle;border-collapse:collapse;">
      <tbody>
        <!-- Rows will be generated by JS -->
      </tbody>
    </table>
    <button id="addMatrixRow" type="button" style="vertical-align:middle;">+</button>
  </div>
  <script src="script.js"></script>
  <script>
    if (window.matchMedia('(max-width: 700px)').matches) {
      var s = document.createElement('script');
      s.src = 'mobile.js';
      document.body.appendChild(s);
    }
  </script>
</body>
</html>
